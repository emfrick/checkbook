<!DOCTYPE html>
<html>
<head>
    <title>Checkbook Frontend</title>
    <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
    <!--<link href='bootstrap/css/bootstrap.min.css' rel='stylesheet'>-->
</head>
<body>
    
    <nav class="navbar navbar-default navbar-inverse" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#toggler">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Checkbook</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id='toggler'>
            <ul class="nav navbar-nav">
                <li class="active"><a href="/">Home</a></li>
                <li><a href="#/new">New Transaction</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">By Month <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="#/2013/01">January</a></li>
                        <li><a href="#/2013/02">February</a></li>
                        <li><a href="#/2013/03">March</a></li>
                        <li><a href="#/2013/04">April</a></li>
                        <li><a href="#/2013/05">May</a></li>
                        <li><a href="#/2013/06">June</a></li>
                        <li><a href="#/2013/07">July</a></li>
                        <li><a href="#/2013/08">August</a></li>
                        <li><a href="#/2013/09">September</a></li>
                        <li><a href="#/2013/10">October</a></li>
                        <li><a href="#/2013/11">November</a></li>
                        <li><a href="#/2013/12">December</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Account <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="#">Signout</a></li>
                    </ul>
                </li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </nav>
    
    <div class='container'>
        <h1 id='page-header'></h1>
        
        <div class='page'>
            
        </div>
        
    </div>
    
    <script type='text/template' id='transaction-list-template'>
        <div class='table-responsive'>
        <table class='table table-striped table-condensed'>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Description</th>
                    <th>Amount</th>
                    <th>Category</th>
                    <th>Actions</th>
                </tr>
            </thead>

            <tbody>
                <% 
                    _.each(transactions, function(transaction) {
                        // Format the date
                        var tDate = transaction.get('date').substring(0,10);
                        var year = tDate.substring(0,4);
                        var month = tDate.substring(5,7);
                        var day = tDate.substring(8,10);
                %>
                    <tr>
                        <td><%= month %>/<%= day %>/<%= year %></td>
                        <td><%= transaction.get('description') %></td>
                        <td>$ <%= transaction.get('amount').toFixed(2) %></td>
                        <td><%= transaction.get('category') %></td>
                        <td><a href='#/edit/<%= transaction.id %>' class='btn btn-info'>Edit</a></td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
        </div>
        
        <div class='row-fluid'>
            <div class='panel panel-primary'>
                <div class="panel-heading"><h4>Total</h4></div>
                <div class="panel-body">
                    <h4>$ <%= total.toFixed(2) %></h4>
                </div>
            </div>
        </div>
        
    </script>
    
    <script type='text/template' id='edit-list-template'>
                
        <form class='edit-transaction-form'>
            <legend><%= transaction ? 'Edit' : 'New' %> Transaction</legend>
            <div class='form-group'>
                <label for='date'>Date</label>
                <input type='date' class='form-control' name='date' value='<%= transaction ? transaction.get("date") : ""%>' />
            </div>
                
            <div class='form-group'>
                <label for='description'>Description</label>
                <input type='text' class='form-control' name='description' value="<%= transaction ? transaction.get('description') : ''%>" />
            </div>
            
            <div class='form-group'>
                <label for='amount'>Amount</label>
                <input type='text' class='form-control' name='amount' value='<%= transaction ? transaction.get("amount").toFixed(2) : "$0.00"%>' />
            </div>
            
            <div class='form-group'>
                <label for='category'>Category</label>
                <select class='form-control btn-default' name='category'>
                    <option value='1'>1</option>
                </select>
            <hr />
            
            <button type='submit' class='btn btn-primary'><%= transaction ? 'Save Changes' : 'Create' %></button>
            <a href='/' class='btn btn-default'>Cancel</a>
            <% if(transaction) { %>
                <input type='hidden' name='id' value='<%= transaction.id %>' />
                <button class='btn btn-danger delete'>Delete</button>
            <% }; %>
        </form>
        
    </script>
    
    <!-- Javascript Libraries from CDNJS-->
    <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js'></script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.1/underscore-min.js'></script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.0.0/backbone-min.js'></script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.1.0/backbone.localStorage-min.js'></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

                                            
    <!-- Local JS Libraries -->
    <!--
    <script src='js/lib/jquery-2.0.3.min.js'></script>
    <script src='js/lib/underscore-min.js'></script>
    <script src='js/lib/backbone-min.js'></script>
    <script src='js/lib/backbone.localStorage.js'></script>
    -->
                                
    <!-- App -->
    <script src='js/app.js'></script>
</body>
</html>
