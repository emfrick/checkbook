<!DOCTYPE html>
<html>
<head>
    <title>Checkbook Frontend</title>
    <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
    <link href='bootstrap/css/bootstrap.min.css' rel='stylesheet'>
</head>
<body>
    <div class='container'>
        <h1>Transactions</h1>
        
        <hr />
        <div class='page'>
            
        </div>
    </div>
    
    <script type='text/template' id='transaction-list-template'>
        
        <a href='#/new' class='btn btn-primary'>New Transaction</a>
        
        <table class='table striped'>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Description</th>
                    <th>Amount</th>
                    <th>Actions</th>
                </tr>
            </thead>
            
            <tbody>
                <% 
                    _.each(transactions, function(transaction) {
                        // Format the date
                        var tDate = transaction.get('date').substring(0,10);
                        var year = tDate.substring(0,4);
                        var month = tDate.substring(5,7);
                        var day = tDate.substring(8,10);
                %>
                    <tr>
                        <td><%= month %>/<%= day %>/<%= year %></td>
                        <td><%= transaction.get('description')  %></td>
                        <td><%= transaction.get('amount')       %></td>
                        <td><a href='#/edit/<%= transaction.id %>' class='btn'>Edit</a></td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
        
        <h4>Total: $ <%= total.toFixed(2) %></h4>
        
    </script>
    
    <script type='text/template' id='edit-list-template'>
        
        <a href='/CheckbookApp/' class='btn btn-primary'>Home</a>
        
        <form class='edit-transaction-form'>
            <legend><%= transaction ? 'Edit' : 'New' %> Transaction</legend>
            <label>Date</label>
            <input type='date' name='date' value='<%= transaction ? transaction.get("date") : ""%>' />
            <label>Description</label>
            <input type='text' name='description' value='<%= transaction ? transaction.get("description") : ""%>' />
            <label>Amount</label>
            <input type='text' name='amount' value='<%= transaction ? transaction.get("amount") : "$0.00"%>' />
            <hr />
            
            <button type='submit' class='btn'><%= transaction ? 'Save Changes' : 'Create' %></button>
            <% if(transaction) { %>
                <input type='hidden' name='id' value='<%= transaction.id %>' />
                <button class='btn btn-danger delete'>Delete</button>
            <% }; %>
        </form>
        
    </script>
    
    <!-- Javascript Libraries from CDNJS-->
    <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js'></script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.1/underscore-min.js'></script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.0.0/backbone-min.js'></script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.1.0/backbone.localStorage-min.js'></script>
                                            
    <!-- Local JS Libraries --> <!--
    <script src='js/lib/jquery-2.0.3.min.js'></script>
    <script src='js/lib/underscore-min.js'></script>
    <script src='js/lib/backbone-min.js'></script>
    <script src='js/lib/backbone.localStorage.js'></script>
                               -->
    
    <!-- App -->
    <script src='js/app.js'></script>
</body>
</html>
